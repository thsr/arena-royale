{% extends "layout.html" %}




{% block head %}
{{ super() }}
<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@12.0.0/dist/lazyload.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tlite@0.1.9/tlite.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tlite@0.1.9/tlite.css">
<script>
    tlite(el => el.classList.contains('tooltipped'));
</script>
<style type="text/css">
    .blocks {
        display: grid;
        grid-gap: 2rem;
        grid-template-columns: repeat(auto-fill, 220px);
        grid-template-rows: repeat(auto-fill, 220px);
        margin: 0 auto;
        justify-items: center;
        align-items: center;
    }
    .block {
        width: 220px;
        height: 220px;
        border: 1px solid #ccc;
        display: grid;
        grid-template-columns: 1fr;
        grid-template-rows: 1fr;
    }
    .channel, .image, .text, .link, .media, .attachment, .overlay {
        grid-area: 1 / 1 / 2 / 2;
    }
    .channel, .image, .media, .attachment {
        justify-self: center;
        align-self: center;
    }
    .channel {
        padding: 1rem;
    }
    .channel p {
        margin: 0 0 .25em;
        text-align: center;
    }
    .channel .title.public {
        color:rgb(0, 180, 0);
    }
    .channel .title.private {
        color:rgb(255, 0, 0);
    }
    .channel .title.closed {
        color:rgb(0, 0, 255);
    }
    .channel .title {
        font-size: 1.5rem;
        font-weight: 300;
    }
    .block img {
        max-width: 220px;
        max-height: 220px;
    }
    .text {
        padding: .5rem;
        overflow: hidden;
    }

    .block .overlay {
        justify-self: stretch;
        align-self: stretch;
        background: rgba(255, 255, 255, 0.9);
        visibility: hidden;
        width: 220px;
        height: 220px;
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        grid-template-rows: repeat(7, 1fr);
        justify-items: center;
        align-items: center;

    }
    .block:hover .overlay {
        visibility: visible;
    }
    .overlay .user, .overlay .arena, .overlay .attachment, .overlay .image-original {
        font-size: 1.5rem;
    }
    .overlay .user {
        grid-area: 4 / 3 / 5 / 4;
    }
    .overlay .image-original {
        grid-area: 4 / 4 / 5 / 5;
    }
    .overlay .arena {
        grid-area: 4 / 5 / 5 / 6;
    }
    .overlay .title {
        grid-area: 2 / 1 / 3 / 8;
    }
    .overlay .source {
        grid-area: 3 / 1 / 4 / 8;
    }
    .overlay .other {
        grid-area: 5 / 4 / 6 / 5;
    }
    .overlay .title, .overlay .source {
        max-width: 200px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
    .overlay .channels {
        justify-self: center;
        align-self: end;
        max-width: 200px;
        max-height: 60px;
        grid-area: 6 / 1 / 8 / 8;
        overflow: hidden;
        text-align: center;
    }
    /* .overlay .channels a {
        display: inline-block;
        max-width:90px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    } */
    a.public-channel {
        color:rgb(0, 180, 0);
    }
    a:hover.public-channel {
        color:rgb(0, 77, 0);
    }
    a.private-channel {
        color:red;
    }
    a:hover.private-channel {
        color:darkred;
    }
    a.closed-channel {
        color:blue;
    }
    a:hover.closed-channel {
        color:darkblue;
    }
    .overlay .channels a+a::before {
        content: "\00a0/\00a0";
        color: #777;
    }
</style>
{% endblock %}




{% block header %}
<a href="https://are.na" target="_blank">&#10033;&#10033; <i class="fa fa-external-link"></i></a>
    {% if this_channel %}
    / <a href="https://are.na/{{ this_channel.user_slug }}/{{ this_channel.slug }}" target="_blank">{{ this_channel.title }} <i class="fa fa-external-link"></i></a>
    {% endif %}
{% endblock %}




{% block nav %}
<ul>
    <li><a href="/blocks">All</a></li>
    <li>&mdash;</li>
    {% for channel in channels %}
    <li><a href="/blocks?channel={{ channel.id }}" class="{{ channel.status + "-channel" }}">{{channel.title}}</a></li>
    {% endfor %}
</ul>
{% endblock %}




{% block content %}
<div class="blocks">
    {% for block in blocks %}

    <div class="block">
        <div class="{{ block.data.class|lower }}">

            {% if block.data.class == "Channel" %}
            <p class="title {{ block.data.status }}">{{ block.data.title }}</p>
            <p class="author">by {{ block.data.user_full_name }}</p>
            <p class="count">{{ block.data.length }} blocks</p>
            {% endif %}

            {% if 'image_original_url' in block.data %}
            <img class="lazy" data-src="{{ block.data.image_original_url }}" />
            {% endif %}

            {% if block.data.class == "Text" %}
            {{ block.data.content }}
            {% endif %}
        </div>
        <div class="overlay">
            {% if 'title' in block.data and block.data.class != "Channel" %}
            <div class="title">
                {{ block.data.title }}
            </div>
            {% endif %}

            <div class="user">
                <a class="tooltipped" title="{{ block.data.user_full_name }}" href="https://www.are.na/{{ block.data.user_slug }}" target="_blank">
                    <i class="fa fa-user"></i>
                </a>
            </div>
        

            {% if block.data.class == "Channel" %}
            <div class="arena">
                <a href="https://www.are.na/{{ block.data.user_slug }}/{{ block.data.slug }}" target="_blank">
                    <i class="fa fa-asterisk"></i>
                </a>
            </div>
            {% else %}
            <div class="arena">
                <a href="https://www.are.na/block/{{ block.data.id }}" target="_blank">
                    <i class="fa fa-asterisk"></i>
                </a>
            </div>
            {% endif %}

            {% if 'image_original_url' in block.data %}
            <div class="image-original">
                <a href="{{ block.data.image_original_url }}" target="_blank">
                    <i class="fa fa-expand"></i>
                </a>
            </div>
            {% endif %}

            <!-- {% if 'source_url' in block.data %}
            <a href="{{ block.data.source_url }}" target="_blank">
                    <i class="fa fa-link"></i>
            </a>
            {% endif %} -->

            {% if 'attachment_url' in block.data %}
            <div class="attachment">
                <a href="{{ block.data.attachment_url }}" target="_blank">
                    <i class="fa fa-paperclip"></i>
                </a>
            </div>
            {% endif %}


            {% if 'source_url' in block.data %}
            <p class="source">
                <a href="{{ block.data.source_url }}" target="_blank">
                    <i class="fa fa-link"></i> {{ block.data.source_provider_name or block.data.source_url }}
                </a>
            </p>
            {% endif %}


            {% if 'gcs_youtubedl_url' in block.data %}
            <p class="other">
                <a href="{{ block.data.gcs_youtubedl_url }}" target="_blank">
                    <i class="fa fa-file-video-o"></i>
                </a>
            </p>
            {% endif %}


            {% if 'gcs_webm' in block.data %}
            <p class="other">
                <a href="{{ block.data.gcs_webm }}" target="_blank">
                    <i class="fa fa-file-video-o"></i>
                </a>
            </p>
            {% endif %}

            <p class="channels">
                {% for channel in block.channels -%}
                <a title="{{ channel.title }}" class="{{ channel.status + "-channel" }}" href="/blocks?channel={{ channel.id }}">
                    {{ channel.title }}
                </a>
                {%- endfor %}
            </p>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}




{% block before_end_body %}
<script>
    (function() {
        var ll = new LazyLoad({
            elements_selector: ".lazy"
        });
    })();
</script>
{% endblock %}